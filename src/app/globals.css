/* src/app/globals.css */

/* 1. Стандартные директивы Tailwind */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* 2. Определение CSS переменных для тем (основной способ) */
@layer base {
  /* :root определяет переменные для светлой темы (если она используется) */
  /* и как fallback, если темная тема не активна */
  :root {
    --radius: 0.625rem; /* Радиус скругления */

    /* Цвета в формате HSL (как ожидает shadcn/ui по умолчанию) */
    --background: 0 0% 100%; /* white */
    --foreground: 222.2 84% 4.9%; /* near black */

    --muted: 210 40% 96.1%; /* light gray */
    --muted-foreground: 215.4 16.3% 46.9%; /* gray */

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --border: 214.3 31.8% 91.4%; /* light gray border */
    --input: 214.3 31.8% 91.4%;

    --primary: 221.2 83.2% 53.3%; /* blue */
    --primary-foreground: 210 40% 98%; /* near white */

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%; /* red */
    --destructive-foreground: 210 40% 98%;

    --ring: 221.2 83.2% 53.3%; /* blue ring */

    /* Переменные для шрифтов (если нужны) */
    /* --font-sans: "Your Sans Font", sans-serif; */
    /* --font-mono: "Your Mono Font", monospace; */
  }

  /* .dark определяет переменные для темной темы */
  .dark {
    /* Значения HSL, подобраны для темного дизайна со скриншотов */
    --background: 224 71% 4%;    /* Очень темный синий */
    --foreground: 210 40% 98%;    /* Почти белый */

    --muted: 217 33% 17%;       /* Темно-серый/синий для приглушенных фонов */
    --muted-foreground: 215 20% 65%; /* Сероватый для приглушенного текста */

    --popover: 224 71% 6%;       /* Чуть светлее фона для всплывающих окон */
    --popover-foreground: 210 40% 98%;

    --card: 224 71% 9%;         /* Темно-синий для карточек */
    --card-foreground: 210 40% 98%;

    --border: 217 33% 25%;       /* Темно-серо-синий для границ */
    --input: 217 33% 25%;        /* Цвет фона инпутов */

    --primary: 217 91% 60%;       /* Яркий синий */
    --primary-foreground: 210 40% 98%; /* Светлый текст на синем */

    --secondary: 217 33% 17%;     /* Такой же как muted */
    --secondary-foreground: 210 40% 98%;

    --accent: 217 33% 20%;       /* Чуть светлее muted/secondary для акцентного фона */
    --accent-foreground: 210 40% 98%;

    --destructive: 0 63% 45%;     /* Более темный красный */
    --destructive-foreground: 210 40% 98%;

    --ring: 217 91% 70%;         /* Более светлый синий для кольца фокуса */
  }
}

/* 3. Базовые стили для HTML и Body */
@layer base {
  * {
    @apply border-border; /* Применяем цвет границы по умолчанию */
    /* Можно добавить box-sizing: border-box; если нужно */
    /* box-sizing: border-box; */
  }
  html {
    scroll-behavior: smooth; /* Плавная прокрутка */
    /* Улучшение рендеринга шрифтов */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  body {
    @apply bg-background text-foreground min-h-screen;
    font-feature-settings: "rlig" 1, "calt" 1; /* Включаем лигатуры */
    /* font-family: var(--font-sans); /* Если используете кастомный шрифт */
  }

  /* Стилизация скроллбара (опционально) */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  ::-webkit-scrollbar-track {
    background: hsl(var(--background) / 0.1); /* Полупрозрачный фон трека */
    border-radius: 4px;
  }
  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border)); /* Цвет бегунка */
    border-radius: 4px;
    border: 1px solid hsl(var(--background)); /* Небольшая обводка */
  }
  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground)); /* Цвет при наведении */
  }
}

/* 4. Стили для контента, сгенерированного из Markdown (замена prose) */
@layer components {
  .markdown-content { /* Используйте этот класс на div вокруг ReactMarkdown */
    & h1 { @apply text-3xl font-bold mt-8 mb-6 pb-2 border-b border-border text-foreground; }
    & h2 { @apply text-2xl font-semibold mt-6 mb-4 pb-2 border-b border-border text-foreground; }
    & h3 { @apply text-xl font-semibold mt-5 mb-3 text-foreground; }
    & p { @apply text-base text-muted-foreground leading-relaxed my-4; }
    & a { @apply text-primary font-medium underline hover:text-primary/80; } /* Добавил underline по умолчанию */
    & ul { @apply list-disc pl-5 my-4 space-y-1.5; }
    & ol { @apply list-decimal pl-5 my-4 space-y-1.5; }
    & li { @apply text-muted-foreground ml-2; } /* Добавил небольшой отступ слева */
    & li > p { @apply my-0; } /* Убираем лишние отступы параграфов в списках */
    & strong { @apply font-semibold text-foreground; }
    & blockquote { @apply border-l-4 border-primary pl-4 italic text-muted-foreground my-4 py-1; } /* Добавил верт. паддинг */
    & code:not(pre code) { /* Стили для inline code */
      @apply text-sm text-foreground font-mono bg-muted/80 px-1.5 py-0.5 rounded mx-0.5;
      /* Убираем псевдоэлементы, если они добавляются */
      &::before, &::after { content: none; }
    }
    & pre { /* Стили для блоков кода */
      @apply bg-muted p-4 rounded-md overflow-x-auto my-4 text-sm;
    }
    & pre code { /* Стили для кода внутри pre */
      @apply bg-transparent p-0 text-foreground; /* Сбрасываем фон и паддинги */
    }
    & hr { /* Горизонтальная линия */
        @apply border-t border-border my-6;
    }
    /* Добавьте стили для других тегов Markdown по мере необходимости (table, img и т.д.) */
  }
}